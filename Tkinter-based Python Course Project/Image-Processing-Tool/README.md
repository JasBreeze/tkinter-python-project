# ProEditor 图像处理工具

## 功能特点

### 🎨 基础调整

- **亮度调节**：调整图像的整体亮度
- **对比度调节**：增强或减弱图像的明暗对比
- **饱和度调节**：调整图像的色彩鲜艳程度
- **锐化调节**：增强图像的细节清晰度

### 📸 滤镜效果

- **内置滤镜**：提供黑白、怀旧、模糊、浮雕、轮廓等多种预设滤镜
- **LUT 滤镜**：支持加载 .cube 和 .png 格式的 3D LUT 文件，实现专业级色彩分级

### ✂️ 裁剪旋转

- **自由裁剪**：支持任意尺寸和比例的裁剪
- **固定比例裁剪**：提供 1:1、4:3、3:4、16:9、9:16 等常用比例
- **旋转功能**：支持 90° 左右旋转、自定义角度旋转
- **翻转功能**：支持水平翻转和垂直翻转

### 💧 文字水印

- **自定义文字**：支持输入任意文字作为水印
- **时间水印**：自动添加当前时间作为水印
- **样式定制**：可调整字体大小、颜色、透明度和描边
- **自由拖动**：支持鼠标拖动调整水印位置
- **右键删除**：便捷的水印删除功能

### 🖌️ 画笔涂鸦

- **画笔模式**：支持自由绘制，可调整画笔大小和颜色
- **橡皮擦模式**：支持擦除绘制内容，带有放大镜辅助
- **实时预览**：绘制过程实时显示效果

### 🔍 马赛克工具

- **多种马赛克类型**：支持像素化和模糊两种马赛克效果
- **可调节大小**：可根据需求调整马赛克的大小
- **自由绘制**：支持鼠标自由绘制马赛克区域

### 🎭 贴纸功能
- **丰富的贴纸库**：内置多种风格的贴纸资源
- **自由调整**：支持拖动、缩放、旋转和调整大小
- **便捷删除**：右键点击即可删除贴纸

## 技术栈

- **Python 3.12**：项目开发语言
- **Tkinter**：GUI 框架
- **Pillow (PIL)**：图像处理库
- **MVC 架构**：模型-视图-控制器设计模式

## 项目结构

```
Image-Processing-Tool/
├── __pycache__/          # Python 编译缓存
├── resources/            # 资源文件目录
│   ├── Insta360-LUT/     # LUT 文件
│   └── stickers/         # 贴纸资源
├── config.py             # 配置文件，包含颜色主题等
├── controllers.py        # 控制器层，处理业务逻辑
├── main.py               # 项目入口文件
├── models.py             # 模型层，定义数据模型和处理方法
├── utils.py              # 工具函数，包含 LUT 解析等
└── views.py              # 视图层，负责 UI 渲染
```

## 核心模块说明

### 1. 控制器层 (controllers.py)

`EditorController` 类是整个应用的核心控制器，负责处理所有用户交互和业务逻辑：

- **图像加载与保存**：处理图像的打开、保存和重命名
- **编辑操作处理**：管理各种编辑工具的状态和行为
- **视图更新**：协调模型和视图之间的通信
- **撤销/重做机制**：维护编辑历史记录

### 2. 视图层 (views.py)

`ModernEditorView` 类负责整个应用的 UI 渲染和用户交互：

- **三栏布局**：工具栏(左) | 画布(中) | 属性面板(右)
- **动态面板**：根据当前选择的工具动态切换右侧属性面板
- **事件绑定**：处理鼠标和键盘事件
- **实时预览**：显示编辑操作的实时效果

### 3. 模型层 (models.py)

包含多个功能类，负责具体的图像处理操作：

- `DoodleEditor`：处理涂鸦绘制功能
- `MosaicEditor`：实现马赛克效果
- `DraggableTextWatermark`：处理文字水印
- `DraggableSticker`：管理贴纸功能
- `CropController`：处理裁剪操作

### 4. 工具函数 (utils.py)

提供了一些辅助功能：

- `parse_cube_file`：解析 .cube 格式的 LUT 文件
- `apply_3d_lut`：应用 3D LUT 到图像
- `apply_LUT`：统一的 LUT 应用接口
- `auto_compress`：图像自动压缩功能

## 使用说明

### 启动应用

```bash
python main.py
```

### 基本操作流程

1. **打开图片**：点击顶部菜单栏的 "📂 打开图片" 按钮，选择要编辑的图片文件
2. **选择工具**：在左侧工具栏选择需要的编辑工具
3. **调整参数**：在右侧属性面板中调整相应的参数
4. **实时预览**：在中央画布查看编辑效果
5. **应用效果**：点击属性面板中的 "✔ 确认" 按钮应用效果
6. **保存图片**：点击顶部菜单栏的 "💾 保存" 按钮保存编辑后的图片
